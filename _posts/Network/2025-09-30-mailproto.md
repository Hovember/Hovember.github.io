---
title: "메일 프로토콜 (SMTP, POP3, IMAP)"
excerpt: "메일 프로토콜을 알아보자"
categories:
  - Network
date: 2025-09-30
last_modified_at: 2025-09-30
---
<br>
이해하기 쉽게 그림을 넣을 생각입니다.

## SMTP(Simple Mail Transfer Protocol)

**이메일을 전송할 때 사용하는 프로토콜**

이 프로토콜이 사용되는 경우는 두 가지로<br>
1. 클라이언트에서 메일 서버로 전송할 때<br>
2. 서버 간 메일을 전송할 때

sender@gmail.com 이 메일을 보내는 사람<br>
receiver@naver.com 이 메일을 받는 사람으로 해서 예를 들어보겠다.

1. sender@gmail.com(클라이언트)가 smtp.gmail.com (smtp 서버)로 메일 전송 <br>
2. smtp 서버는 수신자의 주소(receiver@naver.com)를 확인 @naver.com 도메일을 가진 메일이므로 naver로 메일 전달해야겠다고 판단<br>
3. gmail smtp 서버는 dns에서 naver.com의 mx 레코드 조회 그리고나서 dns에서 mx.naver.com의 ip주소를 알아낸다<br>
4. gmail smtp 서버가 naver 메일 서버에 smtp 프로토콜로 접속해서 메일 전달

SMTP 프로토콜로 접속해서 메일을 전달한다는 것은 TCP 소켓을 열어(25번 포트로 TCP 연결을 연다) SMTP 명령어와 응답을 주고 받는 것이다.

따라서 1번과 4번의 경우가 SMTP 프로토콜이 사용되는 경우이다. 

## POP3(Post Office Protocol 3) 

**이메일을 수신할 때 사용하는 프로토콜**

메일 서버에 저장된 메일을 클라이언트로 가져오기 위한 프로토콜

POP3로 서버로부터 메일을 다운로드 할 때는 헤더 + 본문 + 첨부 메일 전체를 모두 다운로드한다. (TOP 명령어 쓰면 일부만 가져오기 가능)

<span style="background-color:red"> 기본적으로 메일을 서버에서 내려받으면 서버에 있는 메일은 삭제되는 구조이다. </span> <br>
(내려받은 후에도 서버에 있는 메일이 삭제되지 않도록 별도의 옵션이 존재해 유지 가능)<br>
~~(옵셥으로 "서버에 복사본 남기기"를 켤 수있다고 함, 대신 폴더 분류 / 읽음 여부 동기화 불가능, 확인필요)~~ <br>
여러 기기에서 메일 동기화하기에는 불편, 메일을 삭제한 경우 서버에서 메일을 확인할 수 없다는 단점 존재<br>
서버 저장 공간 절약, 메일 로컬에만 보관하고 싶을 때 사용되는 프로토콜

## IMAP(Internet Message Access Protocol)

**이메일을 수신할 때 사용하는 프로토콜**

POP3와 마찬가지롤 메일 서버에 저장된 메일을 클라이언트로 가져오기 위한 프로토콜

POP3와 다르게 메일을 메일을 서버에 그대로 저장해 여러 기기에서 동기화하면서 확인 가능하다.

여러 기기에서 접근해도 동일한 메일함 상태를 유지할 수 있다. 만약 PC에서 메일을 읽으면 스마트폰에서도 읽음 처리되듯이 동일한 상태 유지

또한, 처음 동기화할 때는 메일 전체를 다 받는 것이 아닌 헤더 부분만 내려 받고 본문이나 첨부파일을 열 때 서버에서 다운로드하는 방식

만약 온라인 상태에서 헤더만 내려받고 오프라인 상태에서 보려면 본문은 보지 못 함,<br>
또한, 기본적으로 헤더만 받고 본문은 필요할 때 다운로드하기 때문에 오프라인 상태에서는 본문 확인이 제한 됨, 그래서 오프라인에서는 제한적<br>
(이 문제를 해결하기 위해 메일 앱 설정에서 "오프라인용 전체 다운로드" 옵셥 존재) -> POP3 처럼 메일 전체를 로컬에 보관 + IMAP의 동기화 장점 동시에 누릴 수 있음









