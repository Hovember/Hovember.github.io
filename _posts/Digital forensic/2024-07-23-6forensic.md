---
layout: single
title: "[Digital Forenisc] - NTFS"
excerpt: "NTFS 분석"
categories:
  - Forensic
date: 2024-07-23
last_modified_at: 2024-07-23
---

# NTFS 구조 

- 모든 데이터를 파일 형태로 관리, 파일시스템을 관리하기 위한 데이터도 데이터 영역에 파일 형태로 저장, 따라서 다른 파일시스템과 차이점은 정형화된 볼륨 레이아웃이 존재하지 않는다는 것

- 파일시스템을 관리하는 파일도 일반 파일과 동일한 파일 형태, 이론적으로 볼륨 어느 곳에 있어도 상관없다. 

- Windows 운영체제에서 안정성을 위해 실제로는 어느 정도 구조를 정해두어 이론처럼 레이아웃이 제각각인 경우는 거의 없다.

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-2ltx{background-color:#cbcefb;color:#ffffff;text-align:center;vertical-align:top}
.tg .tg-c1iy{background-color:#9aff99;color:#ffffff;text-align:center;vertical-align:top}
.tg .tg-grbu{background-color:#ffce93;color:#ffffff;text-align:center;vertical-align:top}
</style>
<table class="tg"><thead>
  <tr>
    <td class="tg-grbu">Volume Boot Record</td>
    <td class="tg-c1iy">Master File Table</td>
    <td class="tg-2ltx">Data Area</td>
  </tr></thead>
</table>

VBR, MFT, Data 영역

- VBR은 NTFS에서 유일하게 위치가 고정된 영역, 다른 파일시스템과 동일하게 볼륨의 첫 번째 섹터에 위치(VBR은 운영체제가 가동될 때 볼륨이 인식되도록 함)<br>
<span style = "color: black;background-color:yellow">★(마지막 섹터에 VBR 복사본이 위치하고 있다.)</span> <br>
- MFT 영역도	 파일 형태로 존재하면서 Data 영역에 포함된다. 

<br>
<br>

# Volume Boot Record 

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-apku{background-color:#f8a102;text-align:center;vertical-align:top}
.tg .tg-jy2k{border-color:#f8a102;text-align:center;vertical-align:top}
</style>
<table class="tg"><thead>
  <tr>
    <th class="tg-apku" colspan="2">Volume Boot Record</th>
  </tr></thead>
<tbody>
  <tr>
    <td class="tg-jy2k">Boot Sector</td>
    <td class="tg-jy2k">NTLDR Information Boot Strap</td>
  </tr>
</tbody>
</table>

VBR 영역에는 부트 섹터, NTLDR 위치 정보 및 추가적인 부트코드가 저장 

부트 섹터 영역 분석을 통해 볼륨의 크기, 클러스터 크기, MFT의 시작 주소와 같은 볼륨의 중요한 정보를 알 수 있다.

VBR 영역 1섹터 바로 다음 이어지는 섹터들은 Boot Record 용으로 비어있는 채로 예약되어 있다. 

VBR 영역의 크기는 볼륨 클러스터 크기에 따라 서로 다르게 존재<br>
* 512 Bytes – 1 섹터
* 1KB – 2 섹터
* 2KB – 4 섹터
* 4KB – 8 섹터
{: .text-center}